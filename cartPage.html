<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Details</title>
    <!-- Here stylesheet is connected -->
    <link rel="stylesheet" href="productPage.css" />
    <link rel="stylesheet" href="cartPage.css" />

    <!-- belows stylesheet for icons from fontawesome  -->
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    />
    <script
      src="https://kit.fontawesome.com/f7dfcdf24b.js"
      crossorigin="anonymous"
    ></script>

    <!-- this is the skinStore icon in the title -->
    <link
      rel="icon"
      href="https://www.skinstore.com/favicon.ico?v=skstrus8.3912.4203"
      type="image/x-icon"
    />

    <style></style>
  </head>
  <body>
    <!---------  NavBar  ----------->
    <div id="landingPage-container">
      <!--Here I created the row-1 inside we use "UsD" & "Help" in Div-->
      <div id="helpnav">
        <a href="####"
          ><div class="us-USD">
            <div id="us-Image">
              <img
                src="https://image.shutterstock.com/image-vector/historical-flag-united-states-48-260nw-1597080676.jpg"
                alt="us-USD Image"
              />
            </div>
            us - USD
          </div></a
        >
        <a href="####"><div class="Help">Help</div></a>
      </div>

      <!--Here I created the row-2 inside we use "SkinStore Content" ,"Search Bar" "Account","Cart" & "Nav Bar" in Div-->

      <div id="row-2">
        <!--Here I created navAbove inside we use "SkinStore Content" ,"Search Bar" "Account" &"Cart"  Div-->

        <div id="navAbove">
          <div id="skin-col" onclick="window.location.href" ="index.html">
            <div>
              <a href="index.html" style="text-decoration: none; color: #333"
                >SkinStore</a
              >
            </div>
            <div>part of the <span>LOOKFANTASTIC</span> group</div>
          </div>

          <div id="search-col">
            <input
              id="search"
              type="text"
              placeholder="Search for a product or a brand..."
            />
            <i class="fas fa-search"></i>
          </div>

          <div id="a-col">
            <div class="dropdown">
              <button
                class="dropbtn"
                onclick="window.location.href"
                ="######"
                id="ac"
              >
                <i class="far fa-user"></i> <span>Account</span>
              </button>

              <div class="dropdown-content">
                <a href="loginandsignuppage/login.html">LOGIN</a>
                <a href="loginandsignuppage/registration.html">REGISTER </a>
                <a href="#">Wish List</a>
                <a href="#">Your Order</a>
                <a href="#">Your Referrals</a>
              </div>
            </div>
          </div>

          <div id="c-col">
            <div class="dropdown">
              <!-- <button  class="dropbtn" onclick=window.location.href="cart.html"  id="cart"><i class="fas fa-cart-arrow-down"></i>  <div id="cartLen">0</div> <span>Cart</span> </button>
                         <div class="dropdown-content">
                             <a  id="cardAval" href="#">There are currently no items in your cart.</a>
                         </div> -->
            </div>
          </div>
        </div>

        <!--Here I created " "Nav Bar" Div-->

        <div id="nav-container">
          <nav>
            <!-- <button onclick="navSlideOut()" id="nav-btn">
                     <div id="nav-icon">
                         <div></div>
                         <div></div>
                         <div></div>
                     </div>
                    </button> -->
            <ul id="nav-link">
              <!-- <li>        
                             <button id="homePage" onclick= window.location.href="homePage.html" >  <i class="fas fa-home"></i> </button>
                             <button id="nav-close" onclick="navSlideIn()" >   <i class="fas fa-times"></i> </button>
                         </li> -->
              <li onclick="window.location.href" ="######">Brands</li>
              <li onclick="window.location.href" ="######">Gifts</li>
              <li onclick="window.location.href" ="######">New & Trending</li>
              <li onclick="window.location.href" ="######">Sale</li>
              <li onclick="window.location.href" ="######">SkinCare</li>
              <li onclick="window.location.href" ="######">Hair</li>
              <li onclick="window.location.href" ="######">Makeup</li>
              <li onclick="window.location.href" ="######">Bath & Body</li>
              <li onclick="window.location.href" ="######">Fragrance</li>
              <li onclick="window.location.href" ="######">Self-Care</li>
              <li onclick="window.location.href" ="######">Tools</li>
              <li onclick="window.location.href" ="######">Build a Routine</li>
              <li onclick="window.location.href" ="######">Blog</li>
              <!-- <li  onclick=window.location.href="######" ><div class="us-USD"> <div id="us-Image"><img src="https://image.shutterstock.com/image-vector/historical-flag-united-states-48-260nw-1597080676.jpg" alt="us-USD Image"></div> us - USD </div></li>
                         <li  onclick=window.location.href="######" ><div class="Help">Help</div></li> -->
            </ul>
          </nav>
        </div>
      </div>

      <!--Here I created the row-3 that means inside we use Remining thing like what ever for example "insise content & foot part" Div-->

      <div id="row-3">
        <div id="someOtherOffer">
          <a class="slideOffers" href="#####">
            <div>
              <i class="fa-solid fa-truck"></i> FREE US Shipping Over $49
            </div></a
          >
          <a class="slideOffers" href="#####">
            <div>
              <i class="fa fa-user-plus" aria-hidden="true"></i> Refer a Friend,
              Get $20
            </div></a
          >
          <a class="slideOffers" href="#####">
            <div>
              <i class="fas fa-users"></i> New Customers Save 20% - Use Code
              NEWBIE
            </div></a
          >
          <a class="slideOffers" href="#####">
            <div>
              <i class="fa-solid fa-mobile-screen"></i> Download Our App
            </div></a
          >
        </div>
        <div id="offerAds">
          <a href="">
            <div>
              St.Patrick's Day Sale: 25% off with code: LUCKY | SHOP NOW >
            </div>
          </a>
        </div>
      </div>
    </div>

    <!---------  CART PAGE  ----------->

    <p id="yourcart">Your Cart</p>
    <div
      class="cartContainer"
      style="left: 0; right: 0; top: 0; bottom: 0; margin: auto"
    >
      <table>
        <thead>
          <tr>
            <th>Products</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Subtotal</th>
            <th id="remove">Delete</th>
          </tr>
        </thead>
        <tbody>
          <!-- <tr>
                    <td>
                        <div class="products">
                            <img src="https://static.thcdn.com/images/large/webp//productimg/1600/1600/11313646-1994918723914534.jpg" alt="">
                            
                            <p>Elizabeth Arden Blockbuster Set</p>
                            
                        </div>
                    </td>
                    <td>$42.00</td>
                    <td><input type="number" value="1"></td>
                    <td>$42.00</td>
                    <td><i class="fa-solid fa-xmark"></i></td>
                </tr> -->
        </tbody>
      </table>
      <div class="CartSubtotal">
        <table>
          <th style="border: none">Cart Subtotal:</th>
          <td style="border: none" id="subtotal"></td>
        </table>
      </div>
    </div>

    <div id="buttons" >
      <button onclick="redirectToProduct()">
        CONTINUE SHOPPING
      </button>
      <button onclick="redirectToPurchase()">
        <i class="fa-solid fa-lock"></i> CHECKOUT SECURELY NOW
      </button>
    </div>

    <!---------  Footer  ----------->

    <div id="footerPart">
      <div class="FooterLine"></div>
      <div class="sochandle">
        <div id="SocialmediaHandles">
          <!-- <p>Sign up to our website and Start Shopping</p> -->
          <!-- <button id="signbtn">Sign Up</button> -->
          <p>
            If youâ€™re having problems accessing the checkout or any part of our
            website, then please get in contact with our Customer Service team
            straight away via the 'Still need help?' section (below) so we can
            fix this for you.
          </p>
        </div>
        <div id="conus">
          <h4>Connect with us</h4>
          <div class="foot-Social">
            <div class="social-links">
              <a href="#"><i class="fab fa-facebook-f"></i></a>
              <a href="#"><i class="fab fa-twitter"></i></a>
              <a href="#"><i class="fab fa-instagram"></i></a>
              <a href="#"><i class="fab fa-linkedin-in"></i></a>
            </div>
          </div>
        </div>
      </div>

      <div>
        <div class="FooterLine"></div>
        <footer class="footer">
          <div class="container">
            <div class="row">
              <div class="footer-col">
                <h4>Help & Information</h4>
                <ul>
                  <li><a href="#">Customer Service</a></li>
                  <li><a href="#">Delivery Information</a></li>
                  <li><a href="#">Returns & Refunds</a></li>
                  <li><a href="#">Help Center</a></li>
                  <li><a href="#">COVID-19 Information</a></li>
                </ul>
              </div>
              <div class="footer-col">
                <h4>About SkinStore</h4>
                <ul>
                  <li><a href="#">About Us</a></li>
                  <li><a href="#">Affiliate Program</a></li>
                  <li><a href="#">Brand Directory</a></li>
                  <li><a href="#">Coupon Codes</a></li>
                  <li><a href="#">Refer A Friend</a></li>
                  <li><a href="#">Student Discount</a></li>
                  <li><a href="#">Join SkinStore Experts</a></li>
                </ul>
              </div>
              <div class="footer-col">
                <h4>Legal</h4>
                <ul>
                  <li><a href="#">Cookie Information</a></li>
                  <li><a href="#">Privacy Policy</a></li>
                  <li><a href="#">Terms And Conditions</a></li>
                  <li><a href="#">Modern Slavery Statement</a></li>
                </ul>
              </div>
              <div class="footer-col">
                <h4>How To Contact Us</h4>
                <ul>
                  <li><a href="#">Message Us</a></li>
                  <li><a href="#">Free Beauty Consultations</a></li>
                </ul>
              </div>
            </div>
          </div>
        </footer>
        <div class="FooterLine"></div>
      </div>
    </div>
  </body>
</html>

<script>
  var cartThings = JSON.parse(localStorage.getItem("cartthings")) || [];

  if (cartThings.length === 0) {
    document.querySelector("#cartContainer").textContent =
      "Add Something to cart";
  } else {
    display(cartThings);
  }

  function display(arr) {
    document.querySelector("tbody").textContent = "";
  
    arr.map(function (ele, idx) {
      var tr = document.createElement("tr");
    
      // First Column - Product Image and Name
      var td1 = document.createElement("td");
      var div = document.createElement("div");
      div.setAttribute("class", "products");
      var image = document.createElement("img");
      image.setAttribute("src", ele.image_url);
      var name = document.createElement("p");
      name.textContent = ele.name;
      div.append(image, name);
      td1.append(div);

      // Second Column - Product Price
      var td2 = document.createElement("td");
      td2.setAttribute("class", "item-price");
      td2.textContent = `$${ele.price}`;

      // Third Column - Quantity
      var td3 = document.createElement("td");
      var input = document.createElement("input");
      input.setAttribute("type", "number");
      input.setAttribute("value", "1");
      input.setAttribute("id", "item-quantity");
      td3.append(input);

      // Fourth Column - Total
      var td4 = document.createElement("td");
      td4.textContent = `$${ele.price}`;

      // Update total when quantity changes
        input.addEventListener("change", function () {
            var curr = +input.value;
            if (curr <= 0) {
            deleteCart(ele);
            document.querySelector("#subtotal").textContent = `$${0}`;
            } else {
            td4.textContent = `$${ele.price * curr}`;
            }
            calTotal();
        });

      // Fifth Column - Remove Button
      var td5 = document.createElement("td");
      td5.innerHTML = '<i class="fa-solid fa-xmark"></i> ';
      td5.addEventListener("click", function () {
        deleteCart(idx);
      });

      // Append all columns to the row
      tr.append(td1, td2, td3, td4, td5);
      document.querySelector("tbody").append(tr);

      // no. of items in cart in navBar
    //   document.querySelector("#cartLen").textContent = 'arr.length';
    //   document.querySelector("#cardAval").innerHTML = `There are currently ${arr.length} items in your cart.`;

    });
    calTotal();
  }

  var cartThings = JSON.parse(localStorage.getItem("cartthings")) || [];

  // Delete cart item
  // function deleteCart(ele, idx){
  //     var deleteArr = cartThings.splice(idx, 1)
  //     localStorage.setItem("cartthings", JSON.stringify(cartThings))
  // document.querySelector("#cartLen").textContent = arr.length
  //     display(cartThings);
  // }

  function deleteCart(idx) {
    var deleted = cartThings.splice(idx, 1);
    localStorage.setItem("cartthings", JSON.stringify(cartThings));
    display(cartThings);
    calTotal() ;
    // if(cart.length === 0){
    //     document.querySelector("#cartContainer").textContent = "Add Something to cart"
    // }else{
    //     display(cartThings);
    // }
  }

  function calTotal(ele) {
    document.querySelector("#subtotal").innerHTML = "";

    var total = 0;
    cartThings.map(function (ele) {
      total += document.querySelector("#item-quantity").value * ele.price;
      console.log(total);
    });
    document.querySelector("#subtotal").textContent = `$${total}`;
  }


//   Redirected to page

function redirectToProduct(){
    window.location.href = "productPage.html";
}

function redirectToHome(){
    window.location.href = "index.html";
}

function redirectToPurchase(){
    window.location.href = "Purchase.html";
}


</script>
